"use strict";(self.webpackChunkdemo_angular_material_crud=self.webpackChunkdemo_angular_material_crud||[]).push([[655],{3655:(lt,P,n)=>{n.r(P),n.d(P,{PostEditModule:()=>at});var l,f=n(8023),E=n(4755),s=n(9401),m=n(1728),c=n(6012),A=n(430),y=n(8097),N=n(3649),h=n(3978),J=n(7066),d=n(5159),u=n(2054),R=n(1369),D=n(655),L=n(3144),g=n(9933),Q=n(4004),x=n(9300),v=n(3900),U=n(8505),Y=n(1005),I=n(590),Z=n(5910),B=n(6301),C=n(2207),p=n(951),t=n(2223),F=n(4761),k=n(2543),j=n(2342),K=n(5531),G=n(2186),S=n(9114);function H(o,e){if(1&o){const a=t.EpF();t.TgZ(0,"div",12)(1,"button",13),t.NdJ("click",function(){t.CHM(a);const r=t.oxw(2);return t.KtG(r.onDelete())}),t._uU(2),t.ALo(3,"translate"),t.qZA()()}2&o&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"UNI.delete")))}function z(o,e){if(1&o){const a=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(a);const r=t.oxw(2);return r.form.controls.title.setValue(""),t.KtG(r.form.controls.body.markAsDirty())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()()}2&o&&(t.Q6J("matTooltip",t.lcZ(2,4,"UNI.clear")),t.uIk("aria-label",t.lcZ(1,2,"UNI.clear")))}function w(o,e){if(1&o){const a=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(a);const r=t.oxw(2);return r.form.controls.body.setValue(""),t.KtG(r.form.controls.body.markAsDirty())}),t.ALo(1,"translate"),t.ALo(2,"translate"),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()()}2&o&&(t.Q6J("matTooltip",t.lcZ(2,4,"UNI.clear")),t.uIk("aria-label",t.lcZ(1,2,"UNI.clear")))}function X(o,e){if(1&o){const a=t.EpF();t.ynx(0),t.YNc(1,H,4,3,"div",2),t.TgZ(2,"mat-card")(3,"mat-card-header")(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-title"),t._uU(7),t.qZA()(),t.TgZ(8,"mat-card-content",3)(9,"form",4),t.NdJ("ngSubmit",function(){t.CHM(a);const r=t.oxw();return t.KtG(r.onSubmit())})("reset",function(r){t.CHM(a);const T=t.oxw();return t.KtG(T.onReset(r))}),t.TgZ(10,"mat-form-field",5)(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"input",6),t.YNc(15,z,5,6,"button",7),t.qZA(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"textarea",8),t.ALo(21,"translate"),t.YNc(22,w,5,6,"button",7),t.qZA(),t.TgZ(23,"div",9)(24,"button",10),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"button",11),t._uU(28),t.ALo(29,"translate"),t.qZA()()()()(),t.BQk()}if(2&o){const a=t.oxw();t.xp6(1),t.Q6J("ngIf","data"===a.dataSource.state),t.xp6(3),t.ekj("blur-sm","data"!==a.dataSource.state),t.xp6(1),t.Oqu("#"+a.dataSource.data.id),t.xp6(1),t.ekj("blur-sm","data"!==a.dataSource.state),t.xp6(1),t.Oqu(a.dataSource.data.title),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(3),t.Oqu(t.lcZ(13,17,"form.post.title.label")),t.xp6(3),t.Q6J("ngIf",a.form.controls.title.value),t.xp6(3),t.Oqu(t.lcZ(19,19,"form.post.body.label")),t.xp6(2),t.Q6J("placeholder",t.lcZ(21,21,"form.post.body.placeholder")),t.xp6(2),t.Q6J("ngIf",a.form.controls.body.value),t.xp6(2),t.Q6J("disabled",a.form.pristine),t.xp6(1),t.hij(" ",t.lcZ(26,23,"UNI.reset")," "),t.xp6(2),t.Q6J("disabled",a.form.pristine||a.form.invalid),t.xp6(1),t.hij(" ",t.lcZ(29,25,"UNI.submit")," ")}}function $(o,e){if(1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-content",15),t._UZ(2,"mat-icon",16),t.TgZ(3,"div"),t._uU(4),t.qZA()()()),2&o){const a=t.oxw();t.xp6(4),t.Oqu(a.dataSource.error)}}function V(o,e){1&o&&(t.TgZ(0,"mat-card")(1,"mat-card-content",15),t._UZ(2,"mat-icon",17),t.TgZ(3,"div"),t._uU(4),t.ALo(5,"translate"),t.qZA()()()),2&o&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"ERROR.post-was-not-found")))}const W=function(o,e){return[o,e]},O=function(o){return[o]};function _(o,e){if(1&o&&(t.ynx(0),t._UZ(1,"mat-icon",20),t.TgZ(2,"a",19),t.ALo(3,"localize"),t._uU(4),t.qZA(),t._UZ(5,"mat-icon",20),t.TgZ(6,"a",19),t.ALo(7,"localize"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.BQk()),2&o){const a=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.WLB(10,W,t.lcZ(3,4,"/"),a.dataSource.data.id)),t.xp6(2),t.Oqu(a.dataSource.data.id),t.xp6(2),t.Q6J("routerLink",t.VKq(13,O,t.lcZ(7,6,"/"+a.dataSource.data.id+"/"+a.ROUTES.POSTS.EDIT))),t.xp6(2),t.hij(" ",t.lcZ(9,8,"BREADCRUMBS.posts.edit"),"")}}function q(o,e){if(1&o&&(t.TgZ(0,"div",18)(1,"a",19),t.ALo(2,"localize"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,_,10,15,"ng-container",0),t.qZA()),2&o){const a=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(7,O,t.lcZ(2,3,"/"))),t.xp6(2),t.Oqu(t.lcZ(4,5,"BREADCRUMBS.app.posts")),t.xp6(2),t.Q6J("ngIf","data"===a.dataSource.state)}}let b=((l=class{constructor(e,a,i,r,T,ot,nt,et,it,rt,st,ct){this.apiService=e,this.route=a,this.translate=i,this.cdr=r,this.breadcrumbsPortalService=T,this.fb=ot,this.snackBar=nt,this.language=et,this.seoService=it,this.lr=rt,this.confirm=st,this.router=ct,this.dataSource=new B.o(C.X),this.ROUTES=p.Z,this.form=this.fb.nonNullable.group({title:["",[s.kI.required,s.kI.min(3)]],body:["",[s.kI.required,s.kI.min(3)]]})}canDeactivate(){return this.form.pristine||this.confirm.openCustomConfirmDialog(Z.C.UnsavedWork)}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent);const e=this.route.paramMap.pipe((0,Q.U)(a=>a.get("id")));e.pipe((0,x.h)(a=>!Number.isNaN(Number(a))),(0,v.w)(a=>this.language.language$.pipe((0,U.b)({next:()=>{const i=this.lr.translateRoute(`/${a}/${p.Z.POSTS.EDIT}`);this.seoService.setSeo({title:this.translate.instant(`SEO.${p.Z.POSTS.EDIT}.title`),description:this.translate.instant(`SEO.${p.Z.POSTS.EDIT}.description`)},i)}}))),(0,g.t)(this)).subscribe(),e.pipe((0,Y.g)(500),(0,U.b)(a=>{Number.isNaN(Number(a))&&(this.dataSource.setData(C.X),this.cdr.markForCheck())}),(0,x.h)(a=>!Number.isNaN(Number(a))),(0,v.w)(a=>this.apiService.detail(Number(a))),(0,g.t)(this)).subscribe({next:a=>{this.dataSource.setData(a),this.form.patchValue(a),this.cdr.markForCheck()},error:a=>{if(a instanceof L.UA&&a.status>=400&&a.status<500)this.dataSource.setData(C.X);else{const i=this.translate.instant("ERROR.unexpected-exception");this.dataSource.setError(i)}this.cdr.markForCheck()}})}ngOnDestroy(){this.portalContent?.detach()}onSubmit(){this.apiService.patch(this.dataSource.data.id,this.form.value).pipe((0,I.P)()).subscribe({next:e=>{this.dataSource.setData(e),this.form.reset(e),this.cdr.markForCheck(),this.snackBar.open(this.translate.instant("response.update.success"),this.translate.instant("UNI.close"))},error:()=>{this.snackBar.open(this.translate.instant("response.update.failed"),this.translate.instant("UNI.close"))}})}onReset(e){e.preventDefault(),this.form.reset(this.dataSource.data)}onDelete(){this.confirm.openCustomConfirmDialog(Z.C.Delete).pipe((0,I.P)(),(0,x.h)(e=>!!e),(0,v.w)(()=>this.apiService.delete(this.dataSource.data.id))).subscribe({next:()=>{this.snackBar.open(this.translate.instant("response.delete.success"),this.translate.instant("UNI.close"));const e=this.lr.translateRoute("/");this.router.navigate([e])},error:()=>{this.snackBar.open(this.translate.instant("response.delete.failed"),this.translate.instant("UNI.close"))}})}}).\u0275fac=function(e){return new(e||l)(t.Y36(F.s),t.Y36(d.gz),t.Y36(h.sK),t.Y36(t.sBO),t.Y36(k.H),t.Y36(s.qu),t.Y36(j.ux),t.Y36(K.T),t.Y36(G.v),t.Y36(u.An),t.Y36(Z.w),t.Y36(d.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-post-edit"]],viewQuery:function(e,a){if(1&e&&t.Gf(f.ig,7),2&e){let i;t.iGM(i=t.CRH())&&(a.portalContent=i.first)}},decls:4,vars:3,consts:[[4,"ngIf"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["class","flex items-end justify-end gap-2",4,"ngIf"],[1,"flex","flex-col","gap-2","mt-2","text-center"],[3,"formGroup","ngSubmit","reset"],[1,"w-full"],["matInput","","type","text","formControlName","title"],["matSuffix","","mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["matInput","","formControlName","body",3,"placeholder"],[1,"flex","justify-center","gap-2"],["mat-button","","color","primary","type","reset",3,"disabled"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],[1,"flex","items-end","justify-end","gap-2"],["mat-button","","color","accent",3,"click"],["matSuffix","","mat-icon-button","",3,"matTooltip","click"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","aria-label","Error icon","fontIcon","error"],["aria-hidden","false","aria-label","Warning icon","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["mat-button","","color","primary",3,"routerLink"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(e,a){1&e&&(t.YNc(0,X,30,27,"ng-container",0),t.YNc(1,$,5,1,"mat-card",0),t.YNc(2,V,6,3,"mat-card",0),t.YNc(3,q,6,9,"div",1)),2&e&&(t.Q6J("ngIf","loading"===a.dataSource.state||"data"===a.dataSource.state),t.xp6(1),t.Q6J("ngIf","error"===a.dataSource.state),t.xp6(1),t.Q6J("ngIf","empty"===a.dataSource.state))},dependencies:[E.O5,f.ig,A.Hw,m.zs,m.lW,m.RK,c.a8,c.dn,c.dk,c.$j,c.n5,y.Nt,S.KE,S.hX,S.R9,N.gM,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,d.rH,u.lO,h.X$],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0}),l);b=(0,D.gn)([(0,g.c)()],b);const M=[{path:"",component:b,canDeactivate:[R.F]}];let tt=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(M),u.fQ.forChild(M),d.Bz,u.fQ]}),o})(),at=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[E.ez,f.eL,A.Ps,m.ot,c.QW,y.c,N.AV,s.UX,tt,h.aw,J.D]}),o})()}}]);