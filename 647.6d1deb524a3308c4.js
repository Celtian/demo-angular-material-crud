"use strict";(self.webpackChunkdemo_angular_material_crud=self.webpackChunkdemo_angular_material_crud||[]).push([[647],{2647:(V,P,e)=>{e.r(P),e.d(P,{PostDetailComponent:()=>J});var d=e(8484),l=e(6814),C=e(9862),t=e(5879),x=e(1993),u=e(2296),i=e(5195),D=e(617),c=e(2787),p=e(8733),m=e(9515),T=e(7398),g=e(2181),E=e(4664),M=e(9397),A=e(5177),I=e(1374),U=e(3003),L=e(6537),h=e(4097),O=e(7919),f=e(4852),R=e(9209),S=e(5991),Z=e(4310),B=e(6241),K=e(2939);const v=function(s){return[s]};function W(s,r){if(1&s){const a=t.EpF();t.TgZ(0,"div",5)(1,"button",6),t.NdJ("click",function(){t.CHM(a);const o=t.oxw(2);return t.KtG(o.onDelete())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"a",7),t.ALo(5,"localize"),t._uU(6),t.ALo(7,"translate"),t.qZA()()}if(2&s){const a=t.oxw(2);t.xp6(2),t.Oqu(t.lcZ(3,3,"UNI.delete")),t.xp6(2),t.Q6J("routerLink",t.VKq(9,v,t.lcZ(5,5,"/"+a.dataSource().data.id+"/"+a.ROUTE_DEFINITION.POSTS.EDIT))),t.xp6(2),t.Oqu(t.lcZ(7,7,"UNI.edit"))}}function N(s,r){if(1&s&&(t.ynx(0),t.YNc(1,W,8,11,"div",2),t.TgZ(2,"mat-card")(3,"mat-card-header")(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.TgZ(6,"mat-card-title"),t._uU(7),t.ALo(8,"uppercase"),t.qZA()(),t.TgZ(9,"mat-card-content")(10,"p",3),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA(),t.TgZ(15,"p",3),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"app-user-info",4),t.qZA()(),t.BQk()),2&s){const a=t.oxw();t.xp6(1),t.Q6J("ngIf","data"===a.dataSource().state),t.xp6(3),t.ekj("blur-sm","loading"===a.dataSource().state),t.xp6(1),t.Oqu("#"+a.dataSource().data.id),t.xp6(1),t.ekj("blur-sm","loading"===a.dataSource().state),t.xp6(1),t.Oqu(t.lcZ(8,18,a.dataSource().data.title)),t.xp6(3),t.ekj("blur-sm","loading"===a.dataSource().state),t.xp6(1),t.hij(" ",t.lcZ(12,20,"post-detail.about-post")," "),t.xp6(2),t.ekj("blur-sm","loading"===a.dataSource().state),t.xp6(1),t.hij(" ",a.dataSource().data.body," "),t.xp6(1),t.ekj("blur-sm","loading"===a.dataSource().state),t.xp6(1),t.hij(" ",t.lcZ(17,22,"post-detail.about-author")," "),t.xp6(2),t.Q6J("user",a.dataSource().data.user)("isLoading","loading"===a.dataSource().state)}}function y(s,r){if(1&s&&(t.ynx(0),t.TgZ(1,"mat-card")(2,"mat-card-content",8),t._UZ(3,"mat-icon",9),t.TgZ(4,"div"),t._uU(5),t.qZA()()(),t.BQk()),2&s){const a=t.oxw();t.xp6(5),t.Oqu(a.dataSource().error)}}function j(s,r){1&s&&(t.ynx(0),t.TgZ(1,"mat-card")(2,"mat-card-content",8),t._UZ(3,"mat-icon",10),t.TgZ(4,"div"),t._uU(5),t.ALo(6,"translate"),t.qZA()()(),t.BQk()),2&s&&(t.xp6(5),t.Oqu(t.lcZ(6,1,"ERROR.post-was-not-found")))}const b=function(s,r){return[s,r]};function Q(s,r){if(1&s&&(t.ynx(0),t._UZ(1,"mat-icon",12),t.TgZ(2,"a",7),t.ALo(3,"localize"),t._uU(4),t.qZA(),t.BQk()),2&s){const a=t.oxw(2);t.xp6(2),t.Q6J("routerLink",t.WLB(4,b,t.lcZ(3,2,"/"),a.dataSource().data.id)),t.xp6(2),t.Oqu(a.dataSource().data.id)}}function Y(s,r){if(1&s&&(t.TgZ(0,"div",11)(1,"a",7),t.ALo(2,"localize"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.YNc(5,Q,5,7,"ng-container",0),t.qZA()),2&s){const a=t.oxw();t.xp6(1),t.Q6J("routerLink",t.VKq(7,v,t.lcZ(2,3,"/"))),t.xp6(2),t.Oqu(t.lcZ(4,5,"BREADCRUMBS.app.posts")),t.xp6(2),t.Q6J("ngIf","data"===a.dataSource().state)}}let J=(()=>{class s{constructor(a,n,o,_,z,w,F,$,H,G){this.apiService=a,this.route=n,this.translate=o,this.breadcrumbsPortalService=_,this.language=z,this.seoService=w,this.lr=F,this.confirm=$,this.router=H,this.snackBar=G,this.destroyRef=(0,t.f3M)(t.ktI),this.dataSource=(0,t.tdS)(new U.o(h.M)),this.ROUTE_DEFINITION=O.R}ngOnDestroy(){this.portalContent?.detach()}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent);const a=this.route.paramMap.pipe((0,T.U)(n=>n.get("id")));a.pipe((0,g.h)(n=>!Number.isNaN(Number(n))),(0,E.w)(n=>this.language.language$.pipe((0,M.b)({next:()=>{const o=this.lr.translateRoute(`/${n}`);this.seoService.setSeo({title:this.translate.instant(`SEO.${O.R.POSTS.DETAIL}.title`),description:this.translate.instant(`SEO.${O.R.POSTS.DETAIL}.description`)},o)}}))),(0,x.sL)(this.destroyRef)).subscribe(),a.pipe((0,A.g)(500),(0,M.b)(n=>{Number.isNaN(Number(n))&&this.dataSource.mutate(o=>o.setData(h.M))}),(0,g.h)(n=>!Number.isNaN(Number(n))),(0,E.w)(n=>this.apiService.detailExpanded(Number(n))),(0,x.sL)(this.destroyRef)).subscribe({next:n=>{this.dataSource.mutate(o=>o.setData(n))},error:n=>{if(n instanceof C.UA&&n.status>=400&&n.status<500)this.dataSource.mutate(o=>o.setData(h.M));else{const o=this.translate.instant("ERROR.unexpected-exception");this.dataSource.mutate(_=>_.setError(o))}}})}onDelete(){this.confirm.openCustomConfirmDialog(f.C.Delete).pipe((0,I.P)(),(0,g.h)(a=>!!a),(0,E.w)(()=>this.apiService.delete(this.dataSource().data.id))).subscribe({next:()=>{this.snackBar.open(this.translate.instant("response.delete.success"),this.translate.instant("UNI.close"));const a=this.lr.translateRoute("/");this.router.navigate([a])},error:()=>{this.snackBar.open(this.translate.instant("response.delete.failed"),this.translate.instant("UNI.close"))}})}static#t=this.\u0275fac=function(n){return new(n||s)(t.Y36(R.s),t.Y36(c.gz),t.Y36(m.sK),t.Y36(S.H),t.Y36(Z.T),t.Y36(B.v),t.Y36(p.An),t.Y36(f.w),t.Y36(c.F0),t.Y36(K.ux))};static#a=this.\u0275cmp=t.Xpm({type:s,selectors:[["app-post-detail"]],viewQuery:function(n,o){if(1&n&&t.Gf(d.ig,7),2&n){let _;t.iGM(_=t.CRH())&&(o.portalContent=_.first)}},standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[4,"ngIf"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["class","flex items-end justify-end gap-2",4,"ngIf"],[1,"mb-2","font-semibold","text-md"],[3,"user","isLoading"],[1,"flex","items-end","justify-end","gap-2"],["mat-button","","color","accent",3,"click"],["mat-button","","color","primary",3,"routerLink"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","aria-label","Error icon","fontIcon","error"],["aria-hidden","false","aria-label","Warning icon","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(n,o){1&n&&(t.YNc(0,N,19,24,"ng-container",0),t.YNc(1,y,6,1,"ng-container",0),t.YNc(2,j,7,3,"ng-container",0),t.YNc(3,Y,6,9,"div",1)),2&n&&(t.Q6J("ngIf","data"===o.dataSource().state||"loading"===o.dataSource().state),t.xp6(1),t.Q6J("ngIf","error"===o.dataSource().state),t.xp6(1),t.Q6J("ngIf","empty"===o.dataSource().state))},dependencies:[l.ez,l.O5,l.gd,i.QW,i.a8,i.dn,i.dk,i.$j,i.n5,D.Ps,D.Hw,u.ot,u.zs,u.lW,d.eL,d.ig,m.aw,m.X$,L.M,c.Bz,c.rH,p.fQ,p.lO],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0})}return s})()}}]);