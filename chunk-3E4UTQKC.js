import{a as gt}from"./chunk-LLUMOVIU.js";import{b as D}from"./chunk-57MPDPP3.js";import{a as ht}from"./chunk-KT64K72B.js";import{a as St,b as xt,c as vt}from"./chunk-65QMIXDV.js";import{G as ft,c as E,e as J,f as K,g as Y,i as Z,j as mt}from"./chunk-2Y6GGT4K.js";import{a as Ct,b as It,c as bt,d as Pt,e as Et,f as yt}from"./chunk-HPZ7DCPP.js";import{a as _t}from"./chunk-YSYWTVNG.js";import{A as I,Aa as r,Ba as o,Ca as S,D as M,Da as x,Db as O,Ea as v,Ga as F,Ic as tt,Jc as et,K as B,Ka as A,Kc as it,L as k,Ma as h,Nc as at,Oc as nt,P as L,Q as j,Qa as d,Qc as rt,Ra as f,Sa as P,Sc as ot,Tc as st,Uc as ct,Va as z,Xa as R,Xc as dt,Ya as Q,Yc as pt,Za as l,Zc as lt,_a as m,ad as ut,bd as y,cb as V,db as $,ea as i,fa as p,fb as H,ia as U,m as w,pa as u,r as C,ra as g,rb as q,ub as W,v as T,va as b,vb as X,wb as G,x as N}from"./chunk-CNKLNQNQ.js";var Dt=e=>[e];function Bt(e,n){if(e&1){let a=F();r(0,"div",5)(1,"button",6),A("click",function(){L(a);let t=h(2);return j(t.onDelete())}),d(2),l(3,"translate"),o(),r(4,"a",7),l(5,"localize"),d(6),l(7,"translate"),o()()}if(e&2){let a=h(2);i(2),f(m(3,3,"UNI.delete")),i(2),u("routerLink",R(9,Dt,m(5,5,"/"+a.dataSource.data().id+"/"+a.ROUTE_DEFINITION.POSTS.EDIT))),i(2),f(m(7,7,"UNI.edit"))}}function kt(e,n){if(e&1&&(x(0),b(1,Bt,8,11,"div",2),r(2,"mat-card")(3,"mat-card-header")(4,"mat-card-subtitle"),d(5),o(),r(6,"mat-card-title"),d(7),l(8,"uppercase"),o()(),r(9,"mat-card-content")(10,"p",3),d(11),l(12,"translate"),o(),r(13,"p"),d(14),o(),r(15,"p",3),d(16),l(17,"translate"),o(),S(18,"app-user-info",4),o()(),v()),e&2){let a=h();i(1),u("ngIf",a.dataSource.state()==="data"),i(3),g("blur-sm",a.dataSource.state()==="loading"),i(1),f("#"+a.dataSource.data().id),i(1),g("blur-sm",a.dataSource.state()==="loading"),i(1),f(m(8,18,a.dataSource.data().title)),i(3),g("blur-sm",a.dataSource.state()==="loading"),i(1),P(" ",m(12,20,"post-detail.about-post")," "),i(2),g("blur-sm",a.dataSource.state()==="loading"),i(1),P(" ",a.dataSource.data().body," "),i(1),g("blur-sm",a.dataSource.state()==="loading"),i(1),P(" ",m(17,22,"post-detail.about-author")," "),i(2),u("user",a.dataSource.data().user)("isLoading",a.dataSource.state()==="loading")}}function Lt(e,n){if(e&1&&(x(0),r(1,"mat-card")(2,"mat-card-content",8),S(3,"mat-icon",9),r(4,"div"),d(5),o()()(),v()),e&2){let a=h();i(5),f(a.dataSource.error())}}function jt(e,n){e&1&&(x(0),r(1,"mat-card")(2,"mat-card-content",8),S(3,"mat-icon",10),r(4,"div"),d(5),l(6,"translate"),o()()(),v()),e&2&&(i(5),f(m(6,1,"ERROR.post-was-not-found")))}var Ut=(e,n)=>[e,n];function Ft(e,n){if(e&1&&(x(0),S(1,"mat-icon",12),r(2,"a",7),l(3,"localize"),d(4),o(),v()),e&2){let a=h(2);i(2),u("routerLink",Q(4,Ut,m(3,2,"/"),a.dataSource.data().id)),i(2),f(a.dataSource.data().id)}}function At(e,n){if(e&1&&(r(0,"div",11)(1,"a",7),l(2,"localize"),d(3),l(4,"translate"),o(),b(5,Ft,5,7,"ng-container",0),o()),e&2){let a=h();i(1),u("routerLink",R(7,Dt,m(2,3,"/"))),i(2),f(m(4,5,"BREADCRUMBS.app.posts")),i(2),u("ngIf",a.dataSource.state()==="data")}}var Pe=(()=>{let n=class n{constructor(s,t,c,_,Mt,Rt,Ot,wt,Tt,Nt){this.apiService=s,this.route=t,this.translate=c,this.breadcrumbsPortalService=_,this.language=Mt,this.seoService=Rt,this.lr=Ot,this.confirm=wt,this.router=Tt,this.snackBar=Nt,this.destroyRef=B(U),this.dataSource=new ht(D),this.ROUTE_DEFINITION=y}ngOnDestroy(){this.portalContent?.detach()}ngOnInit(){this.breadcrumbsPortalService.setPortal(this.portalContent);let s=this.route.paramMap.pipe(w(t=>t.get("id")));s.pipe(C(t=>!Number.isNaN(Number(t))),I(t=>this.language.language$.pipe(M({next:()=>{let c=this.lr.translateRoute(`/${t}`);this.seoService.setSeo({title:this.translate.instant(`SEO.${y.POSTS.DETAIL}.title`),description:this.translate.instant(`SEO.${y.POSTS.DETAIL}.description`)},c)}}))),O(this.destroyRef)).subscribe(),s.pipe(T(500),M(t=>{Number.isNaN(Number(t))&&this.dataSource.setData(D)}),C(t=>!Number.isNaN(Number(t))),I(t=>this.apiService.detailExpanded(Number(t))),O(this.destroyRef)).subscribe({next:t=>{this.dataSource.setData(t)},error:t=>{if(t instanceof G&&t.status>=400&&t.status<500)this.dataSource.setData(D);else{let c=this.translate.instant("ERROR.unexpected-exception");this.dataSource.setError(c)}}})}onDelete(){this.confirm.openCustomConfirmDialog(xt.Delete).pipe(N(),C(s=>!!s),I(()=>this.apiService.delete(this.dataSource.data().id))).subscribe({next:()=>{this.snackBar.open(this.translate.instant("response.delete.success"),this.translate.instant("UNI.close"));let s=this.lr.translateRoute("/");this.router.navigate([s])},error:()=>{this.snackBar.open(this.translate.instant("response.delete.failed"),this.translate.instant("UNI.close"))}})}};n.\u0275fac=function(t){return new(t||n)(p(St),p(it),p(ot),p(mt),p(ut),p(_t),p(dt),p(vt),p(at),p(ft))},n.\u0275cmp=k({type:n,selectors:[["app-post-detail"]],viewQuery:function(t,c){if(t&1&&$(E,7),t&2){let _;V(_=H())&&(c.portalContent=_.first)}},standalone:!0,features:[z],decls:4,vars:3,consts:[[4,"ngIf"],["class","container flex items-center gap-1 py-4",4,"cdkPortal"],["class","flex items-end justify-end gap-2",4,"ngIf"],[1,"mb-2","font-semibold","text-md"],[3,"user","isLoading"],[1,"flex","items-end","justify-end","gap-2"],["mat-button","","color","accent",3,"click"],["mat-button","","color","primary",3,"routerLink"],[1,"flex","flex-col","gap-2","text-center"],["aria-hidden","false","aria-label","Error icon","fontIcon","error"],["aria-hidden","false","aria-label","Warning icon","fontIcon","warning"],[1,"container","flex","items-center","gap-1","py-4"],["aria-hidden","false","aria-label","Arrow icon","fontIcon","chevron_right"]],template:function(t,c){t&1&&b(0,kt,19,24,"ng-container",0)(1,Lt,6,1,"ng-container",0)(2,jt,7,3,"ng-container",0)(3,At,6,9,"div",1),t&2&&(u("ngIf",c.dataSource.state()==="data"||c.dataSource.state()==="loading"),i(1),u("ngIf",c.dataSource.state()==="error"),i(1),u("ngIf",c.dataSource.state()==="empty"))},dependencies:[X,q,W,yt,Ct,bt,Et,Pt,It,et,tt,Z,Y,K,J,E,ct,st,gt,rt,nt,lt,pt],styles:["[_nghost-%COMP%]{width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}@media (min-width: 640px){[_nghost-%COMP%]{max-width:640px}}@media (min-width: 768px){[_nghost-%COMP%]{max-width:768px}}@media (min-width: 1024px){[_nghost-%COMP%]{max-width:1024px}}@media (min-width: 1280px){[_nghost-%COMP%]{max-width:1280px}}@media (min-width: 1536px){[_nghost-%COMP%]{max-width:1536px}}[_nghost-%COMP%]{display:block}[_nghost-%COMP%] > [_ngcontent-%COMP%]:not([hidden]) ~ [_ngcontent-%COMP%]:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}[_nghost-%COMP%]{padding-top:1rem;padding-bottom:1rem}"],changeDetection:0});let e=n;return e})();export{Pe as PostDetailComponent};
